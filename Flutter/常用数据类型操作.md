# Flutter 常用数据类型操作

## List (列表)

### 添加元素

1. `add()`：添加单个元素到末尾

```dart
List<String> a = ['apple', 'banana'];
a.add('orange'); // ['apple', 'banana', 'orange']
```

2. `addAll()`：添加多个元素到末尾

```dart
List<String> a = ['apple', 'banana', 'orange'];
a.addAll(['grape', 'mango']); // ['apple', 'banana', 'orange', 'grape', 'mango']
```

3. `insert()`：在指定位置插入元素

```dart
List<String> a = ['apple', 'banana'];
a.insert(1, 'pear'); // ['apple', 'pear', 'banana']
```

4. `insertAll()`：在指定位置插入多个元素

```dart
List<String> a = ['apple', 'pear', 'banana'];
a.insertAll(2, ['kiwi', 'pineapple']); // ['apple', 'pear', 'kiwi', 'pineapple', 'banana']
```

### 访问元素

1. 通过索引访问：使用 [] 运算符

```dart
List<int> a = [1, 2, 3, 4, 5];
int first = a[0]; // 1
int last = a[a.length - 1]; // 5
```

2. `elementAtOrNull()`：安全访问元素（避免索引越界）

```dart
List<int> a = [1, 2, 3];
// print(a[10]); // 异常报错
int? element = a.elementAtOrNull(10); // null
```

3. `first/last`：获取第一个和最后一个元素

```dart
List<int> a = [1, 2, 3, 4, 5];
int firstElement = a.first; // 1
int lastElement = a.last; // 5
```

4. `isEmpty/isNotEmpty`：检查列表是否为空/不为空

```dart
List<int> a = [1, 2, 3];
bool isEmpty = a.isEmpty; // false
bool isNotEmpty = a.isNotEmpty; // true
```

5. `length`：获取列表长度

```dart
List<int> a = [1, 2, 3];
int length = a.length; // 3
```

### 修改元素

1. 通过索引修改：使用 [] 运算符赋值

```dart
List<int> a = [1, 2, 3, 4, 5];
a[2] = 10; // [1, 2, 10, 4, 5]
```

2. `replaceRange()`：替换指定范围的元素

```dart
List<int> a = [1, 2, 3, 4, 5];
/**
  * void replaceRange(int start, int end, Iterable<E> replacement)
  * start：要替换的范围的起始索引（包含）
  * end：要替换的范围的结束索引（不包含）
  * replacement：要替换的元素集合（可以是 List、Set 等可迭代对象）
  */
a.replaceRange(1, 4, [20, 30]); // [1, 20, 30, 5]
```

### 删除元素

1. `removeAt()`：删除指定索引的元素

```dart
List<String> a = ['apple', 'banana', 'orange'];
a.removeAt(1); // ['apple', 'orange']
```

2. `remove()`：删除指定元素（只删除**第一**个匹配项）

```dart
List<String> a = ['apple', 'orange', 'grape'];
a.remove('orange'); // ['apple', 'grape']
```

3. `removeLast()`：删除最后一个元素

```dart
List<String> a = ['apple', 'grape'];
a.removeLast(); // ['apple']
```

4. `removeRange()`：删除指定范围的元素

```dart
List<String> a = ['apple', 'grape'];
/**
  * void removeRange(int start, int end)
  * start：要删除的范围的起始索引（包含）
  * end：要删除的范围的结束索引（不包含）
  */
a.removeRange(0, 2); // []
```

5. `removeWhere()`：删除所有符合条件的元素

```dart
List<int> a = [1, 2, 3, 4, 5, 6];
a.removeWhere((e) => e % 2 == 0); // [1, 3, 5]
```

6. `retainWhere()`：保留所有符合条件的元素

```dart
List<int> a = [1, 3, 5];
a.retainWhere((e) => e > 2); // [3, 5]
```

7. `clear()`：清空列表

```dart
List<int> a = [3, 5];
a.clear(); // []
```

### 遍历和转换

1. `forEach()`：使用回调函数遍历

```dart
List<String> a = ['apple', 'banana', 'orange'];
a.forEach((e) {
  print(e);
});
```

2. `map()`：遍历元素并返回新列表

```dart
List<String> a = ['apple', 'banana', 'orange'];
/**
  * map方法默认返回Iterable<T>对象，需要使用toList()方法转换为List<T>对象
  */ 
List<String> b = a.map((e) => e.toUpperCase()).toList(); // ['APPLE', 'BANANA', 'ORANGE']
```

3. `where()`：过滤元素并返回新列表

```dart
List<String> a = ['apple', 'banana', 'orange'];
List<String> b = a.where((e) => e.length > 5).toList();
// ['banana', 'orange']
```

### 排序和反转

1. `sort()`：排序

```dart
List<int> a = [3, 1, 4, 1, 5, 9, 2, 6];
a.sort(); // [1, 1, 2, 3, 4, 5, 6, 9]

// 降序排序
a.sort((x, y) => y.compareTo(x)); // [9, 6, 5, 4, 3, 2, 1, 1]
```

2. `reversed`：反转列表

```dart
List<int> a = [9, 6, 5, 4, 3, 2, 1, 1];
List<int> b = a.reversed.toList(); // [1, 1, 2, 3, 4, 5, 6, 9]
```

### 其他常用操作

1. `contains()`：检查是否包含指定元素

```dart
List<int> a = [1, 2, 3, 4, 5];
bool b = a.contains(3); // true
```

2. `indexOf()`：获取元素的索引（只返回第一个匹配项）

```dart
List<int> a = [1, 2, 3, 4, 5];
int b = a.indexOf(3); // 2
```

3. `join()`：连接列表元素为字符串

```dart
List<int> a = [1, 2, 3, 4, 5];
String b = a.join(', '); // "1, 2, 3, 4, 5"
```

4. `sublist()`：获取列表的子列表

```dart
List<int> a = [1, 2, 3, 4, 5];
List<int> b = a.sublist(1, 4); // [2, 3, 4]
```

## Map (映射)

### 添加和修改元素

1. 通过键访问赋值：添加或修改单个键值对

```dart
Map<String, int> a = {'Alice': 90, 'Bob': 85};
a['Charlie'] = 95; // {'Alice': 90, 'Bob': 85, 'Charlie': 95}
a['Alice'] = 92; // {'Alice': 92, 'Bob': 85, 'Charlie': 95}
```

2. `addAll()`：添加多个键值对

```dart
Map<String, int> a = {'Alice': 92, 'Bob': 85, 'Charlie': 95};
a.addAll({'David': 88, 'Eve': 91});
// {'Alice': 92, 'Bob': 85, 'Charlie': 95, 'David': 88, 'Eve': 91}
```

3. `putIfAbsent()`：仅当键不存在时添加键值对

```dart
Map<String, int> a = {'Alice': 92, 'Bob': 85, 'Charlie': 95, 'David': 88, 'Eve': 91};
a.putIfAbsent('Frank', () => 87);
// {'Alice': 92, 'Bob': 85, 'Charlie': 95, 'David': 88, 'Eve': 91, 'Frank': 87}
```

### 访问元素

1. 通过键访问值

```dart
Map<String, int> a = {'Alice': 90, 'Bob': 85, 'Charlie': 95};
int? b = a['Alice']; // 90
int? c = a['Unknown']; // null
```

2. `containsKey()`：检查键是否存在

```dart
Map<String, int> a = {'Alice': 90, 'Bob': 85, 'Charlie': 95};
bool b = a.containsKey('Alice'); // true
```

3. `containsValue()`：检查值是否存在

```dart
Map<String, int> a = {'Alice': 90, 'Bob': 85, 'Charlie': 95};
bool b = a.containsValue(90); // true
```

4. `keys/values/entries`：获取所有键/值/键值对

```dart
Map<String, int> a = {'Alice': 90, 'Bob': 85, 'Charlie': 95};
Iterable<String> b = a.keys;
Iterable<int> c = a.values;
Iterable<MapEntry<String, int>> d = a.entries;
```

### 删除元素

1. `remove()`：删除指定键的元素

```dart
Map<String, int> a = {'Alice': 90, 'Bob': 85, 'Charlie': 95, 'David': 88};
a.remove('Bob'); // {'Alice': 90, 'Charlie': 95, 'David': 88}
```

2. `removeWhere()`：删除所有符合条件的元素

```dart
Map<String, int> a = {'Alice': 90, 'Charlie': 95, 'David': 88};
a.removeWhere((key, value) => value < 90); // {'Alice': 90, 'Charlie': 95}
```

3. `clear()`：清空 Map

```dart
Map<String, int> a = {'Alice': 90, 'Charlie': 95};
a.clear(); // {}
```

### 遍历和转换

1. `forEach()`：使用回调函数遍历

```dart
Map<String, int> a = {'Alice': 90, 'Bob': 85, 'Charlie': 95};
a.forEach((k, v) {
  print('$k: $v');
});
```

### 其他常用操作

1. `update()`：更新指定键的值

```dart
Map<String, int> a = {'Alice': 90};
a.update('Alice', (v) => v + 5); // {'Alice': 95}
```

2. `updateAll()`：更新所有键值对

```dart
Map<String, int> a = {'Alice': 90, 'Bob': 85};
a.updateAll((k, v) => v + 5); // {'Alice': 95, 'Bob': 90}
```

3. `getOrElse()`：获取值，如果键不存在则返回默认值

```dart
Map<String, int> a = {'Alice': 90};
int b = a.getOrElse('Alice', () => 0); // 90
int c = a.getOrElse('Unknown', () => 0); // 0
```

## Set (集合)

### 添加元素

1. `add()`：添加单个元素（重复元素不会添加）

```dart
Set<int> a = {1, 2, 3};
a.add(4); // {1, 2, 3, 4}
a.add(3); // {1, 2, 3, 4}（重复元素不会添加）
```

2. `addAll()`：添加多个元素（重复元素不会添加）

```dart
Set<int> a = {1, 2, 3, 4};
a.addAll([5, 6, 7]); // {1, 2, 3, 4, 5, 6, 7}
```

### 访问元素

1. `contains()`：检查 Set 是否包含指定元素

```dart
Set<int> a = {1, 2, 3, 4, 5};
bool b = a.contains(3); // true
```

2. `isEmpty/isNotEmpty`：检查 Set 是否为空/不为空

```dart
Set<int> a = {1, 2, 3, 4, 5};
bool b = a.isEmpty; // false
bool c = a.isNotEmpty; // true
```

3. `length`：获取 Set 长度

```dart
Set<int> a = {1, 2, 3, 4, 5};
int b = a.length; // 5
```

### 删除元素

1. `remove()`：删除指定元素

```dart
Set<int> a = {1, 2, 3, 4, 5, 6};
a.remove(3); // {1, 2, 4, 5, 6}
```

2. `removeWhere()`：删除所有符合条件的元素

```dart
Set<int> a = {1, 2, 4, 5, 6};
a.removeWhere((e) => e % 2 == 0); // {1, 5}
```

3. `retainWhere()`：保留所有符合条件的元素

```dart
Set<int> a = {1, 5};
a.retainWhere((e) => e < 5); // {1}
```

4. `clear()`：清空 Set

```dart
Set<int> a = {1};
a.clear(); // {}
```

### 遍历和转换

1. `forEach()`：使用回调函数遍历

```dart
Set<int> a = {1, 2, 3, 4, 5};
a.forEach((e) {
  print(e);
});
```

2. `map()`：转换元素并返回新 Set

```dart
Set<int> a = {1, 2, 3};
Set<String> b = a.map((e) => 'Number: $e').toSet();
// {'Number: 1', 'Number: 2', 'Number: 3'}
```

3. `where()`：过滤元素并返回新 Set

```dart
Set<int> a = {1, 2, 3, 4, 5};
Set<int> b = a.where((e) => e % 2 == 0).toSet();
// {2, 4}
```

### 集合操作

1. `union()`：并集

```dart
Set<int> a = {1, 2, 3};
Set<int> b = {4, 5, 6};
Set<int> c = a.union(b); // {1, 2, 3, 4, 5, 6}
```

2. `intersection()`：交集

```dart
Set<int> a = {1, 2, 3, 4};
Set<int> b = {3, 4, 5, 6};
Set<int> c = a.intersection(b); // {3, 4}
```

3. `difference()`：差集

```dart
Set<int> a = {1, 2, 3, 4};
Set<int> b = {3, 4, 5, 6};
Set<int> c = a.difference(b); // {1, 2}
```

4. `symmetricDifference()`：对称差集

```dart
Set<int> a = {1, 2, 3, 4};
Set<int> b = {3, 4, 5, 6};
Set<int> c = a.symmetricDifference(b); // {1, 2, 5, 6}
```

### 其他常用操作

1. `containsAll()`：检查是否包含所有指定元素

```dart
Set<int> a = {1, 2, 3, 4, 5};
bool b = a.containsAll([1, 3, 5]); // true
```

2. `toList()`：转换为 List

```dart
Set<int> a = {1, 2, 3};
List<int> b = a.toList(); // [1, 2, 3]
```