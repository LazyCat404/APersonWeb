# 先从基础开始吧

> 通过[Lottie](../Lottie.md)可以加载**AE**导出的动画文件，那么想要进行交互，就要先对这个文件进行一些了解，当然，如果觉得这个文件真的真的很难理解，也不要紧，因为这只是辅助我们能更好的进行交互。

### 外层

> 动画基础数据，不同动画文件可能存在差异，例如：在没有字体的动画文件中就不存在`font`和`chars`

```json
{
    "v": "5.7.6",           // bodymovin 版本
    "fr": 60,               // 帧率（每秒显示帧数）
    "ip": 0,                // 开始关键帧
    "op": 241,              // 结束关键帧
    "w": 600,               // 视图宽
    "h": 600,               // 视图高
    "nm": "animation_name", // 动画名称
    "ddd": 0,               // 是否是3D
    "assets": [],           // 资源合集
    "fonts": {},            // 字体相关
    "layers": [],           // 图层合集
    "chars": [],            // 单文字路径合集
    "markers": []           // 标记合集
}
```

### assets - 资源合集

> 对已存在的图层/图片（矢量图、位图、预合成层）进行分组，把它们放置到新的合成中，它的`layers`与外层的`layers`图层合集是**一样**的，但不完全相同

```json
"assets": [
    {
        "id": "image_0",   // 图片唯一识别的id，图层获取图片的标识
        "w": 100,          // 图片的宽度
        "h": 100,          // 图片的高度
        "u": "images/",    // 图片的路径
        "p": "img_0.png",  // 图片的名称
        "layers":  []      // 预合成层
    }
]
```

### layers - 图层合集

> 包含所有图层关键的动画信息

```json
    "layers": [
        {
            "ddd": 0,               // 是否是3D
            "ind": 1,               // 在AE里的图层序号，layer 的 id，唯一
            "ty": 0,                // 图层类型
            "nm": "layer_name",     // 图层名
            "ln": "dom_id",         // 渲染为 DOM 上的id
            "tt": 1,                // 遮罩层类型
            "refId": "comp_0",      // 引用的资源，图片/预合成层
            "parent": 0,            // 父图层的id，默认都添加到根图层上
            "sr": 1,
            "ks": {                 // 动画属性
                "o": {},            // 不透明度
                "r": {},            // 旋转
                "p": {},            // 位置
                "a": {},            // anchor 锚点
                "s": {}             // 缩放
            },
            "ao": 0,
            "shapes":[],            // 矢量图形图层的数组
            "hasMask": true,
            "masksProperties":[],   // 蒙版的数组
            "w": 600,               // 预合成层：宽
            "h": 600,               // 预合成层：高
            "ip": 0,                // 开始关键帧
            "op": 241,              // 结束关键帧
            "st": 0,
            "sw": 0,                // 固态层：宽
            "sh": 0,                // 固态层：高
            "sc": 0 ,               // 固态层：颜色
            "bm": 0
        }
    ],
```

#### layers-ty 详解

> 真对不同类型的图层，做出不同的处理

- **0**： 预合成层

- **1**： 固态层

- **2**： 图片层

- **3**： 空层

- **4**： 形状层

- **5**： 位置层

- **13**：文字层

#### layers-shapes-ty

- **gr**: 图形组合

- **st**: 图形描边

- **fl**: 图形填充

- **tr**: 图形变换

- **sh**: 图形路径

- **rc**: 矩形路径

- **el**: 椭圆路径

- **tm**: 裁剪路径